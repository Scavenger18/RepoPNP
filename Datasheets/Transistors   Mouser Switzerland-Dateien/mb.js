var nAgt=navigator.userAgent;if(!$.browser){$.browser={};$.browser.mozilla=!1;$.browser.webkit=!1;$.browser.opera=!1;$.browser.safari=!1;$.browser.chrome=!1;$.browser.msie=!1;$.browser.ua=nAgt;$.browser.name=navigator.appName;$.browser.fullVersion=""+parseFloat(navigator.appVersion);$.browser.majorVersion=parseInt(navigator.appVersion,10);var nameOffset,verOffset,ix;if(-1!=(verOffset=nAgt.indexOf("Opera"))){$.browser.opera=!0,$.browser.name="Opera",$.browser.fullVersion=nAgt.substring(verOffset+6),-1!=(verOffset=nAgt.indexOf("Version"))&&($.browser.fullVersion=nAgt.substring(verOffset+8))
}else{if(-1!=(verOffset=nAgt.indexOf("OPR"))){$.browser.opera=!0,$.browser.name="Opera",$.browser.fullVersion=nAgt.substring(verOffset+4)}else{if(-1!=(verOffset=nAgt.indexOf("MSIE"))){$.browser.msie=!0,$.browser.name="Microsoft Internet Explorer",$.browser.fullVersion=nAgt.substring(verOffset+5)}else{if(-1!=nAgt.indexOf("Trident")){$.browser.msie=!0;$.browser.name="Microsoft Internet Explorer";var start=nAgt.indexOf("rv:")+3,end=start+4;$.browser.fullVersion=nAgt.substring(start,end)}else{-1!=(verOffset=nAgt.indexOf("Chrome"))?($.browser.webkit=!0,$.browser.chrome=!0,$.browser.name="Chrome",$.browser.fullVersion=nAgt.substring(verOffset+7)):-1!=(verOffset=nAgt.indexOf("Safari"))?($.browser.webkit=!0,$.browser.safari=!0,$.browser.name="Safari",$.browser.fullVersion=nAgt.substring(verOffset+7),-1!=(verOffset=nAgt.indexOf("Version"))&&($.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("AppleWebkit"))?($.browser.webkit=!0,$.browser.name="Safari",$.browser.fullVersion=nAgt.substring(verOffset+7),-1!=(verOffset=nAgt.indexOf("Version"))&&($.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("Firefox"))?($.browser.mozilla=!0,$.browser.name="Firefox",$.browser.fullVersion=nAgt.substring(verOffset+8)):(nameOffset=nAgt.lastIndexOf(" ")+1)<(verOffset=nAgt.lastIndexOf("/"))&&($.browser.name=nAgt.substring(nameOffset,verOffset),$.browser.fullVersion=nAgt.substring(verOffset+1),$.browser.name.toLowerCase()==$.browser.name.toUpperCase()&&($.browser.name=navigator.appName))
}}}}-1!=(ix=$.browser.fullVersion.indexOf(";"))&&($.browser.fullVersion=$.browser.fullVersion.substring(0,ix));-1!=(ix=$.browser.fullVersion.indexOf(" "))&&($.browser.fullVersion=$.browser.fullVersion.substring(0,ix));$.browser.majorVersion=parseInt(""+$.browser.fullVersion,10);isNaN($.browser.majorVersion)&&($.browser.fullVersion=""+parseFloat(navigator.appVersion),$.browser.majorVersion=parseInt(navigator.appVersion,10));$.browser.version=$.browser.majorVersion}$.browser.android=/Android/i.test(nAgt);$.browser.blackberry=/BlackBerry/i.test(nAgt);
$.browser.ios=/iPhone|iPad|iPod/i.test(nAgt);$.browser.operaMobile=/Opera Mini/i.test(nAgt);$.browser.windowsMobile=/IEMobile/i.test(nAgt);$.browser.mobile=$.browser.android||$.browser.blackberry||$.browser.ios||$.browser.windowsMobile||$.browser.operaMobile;(function(f){function b(h){var d=h||window.event,l=[].slice.call(arguments,1),j=0,k=0,i=0;h=f.event.fix(d);h.type="mousewheel";d.wheelDelta&&(j=d.wheelDelta/120);d.detail&&(j=-d.detail/3);i=j;void 0!==d.axis&&d.axis===d.HORIZONTAL_AXIS&&(i=0,k=-1*j);void 0!==d.wheelDeltaY&&(i=d.wheelDeltaY/120);
void 0!==d.wheelDeltaX&&(k=-1*d.wheelDeltaX/120);l.unshift(h,j,k,i);return(f.event.dispatch||f.event.handle).apply(this,l)}var g=["DOMMouseScroll","mousewheel"];if(f.event.fixHooks){for(var a=g.length;a;){f.event.fixHooks[g[--a]]=f.event.mouseHooks}}f.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var c=g.length;c;){this.addEventListener(g[--c],b,!1)}}else{this.onmousewheel=b}},teardown:function(){if(this.removeEventListener){for(var c=g.length;c;){this.removeEventListener(g[--c],b,!1)
}}else{this.onmousewheel=null}}};f.fn.extend({mousewheel:function(c){return c?this.bind("mousewheel",c):this.trigger("mousewheel")},unmousewheel:function(c){return this.unbind("mousewheel",c)}})})($);!function(d,c){"object"==typeof exports?module.exports=c():"function"==typeof define&&define.amd?define(c):d.Spinner=c()}(this,function(){function D(f,e){var h,g=document.createElement(f||"div");for(h in e){g[h]=e[h]}return g}function C(e){for(var d=1,f=arguments.length;f>d;d++){e.appendChild(arguments[d])}return e
}function B(G,F,E,o){var n=["opacity",F,~~(100*G),E,o].join("-"),m=0.01+E/o*100,l=Math.max(1-(1-G)/F*(100-m),G),k=u.substring(0,u.indexOf("Animation")).toLowerCase(),j=k&&"-"+k+"-"||"";return s[n]||(r.insertRule("@"+j+"keyframes "+n+"{0%{opacity:"+l+"}"+m+"%{opacity:"+G+"}"+(m+0.01)+"%{opacity:1}"+(m+F)%100+"%{opacity:"+G+"}100%{opacity:"+l+"}}",r.cssRules.length),s[n]=1),n}function A(g,f){var j,i,h=g.style;for(f=f.charAt(0).toUpperCase()+f.slice(1),i=0;i<t.length;i++){if(j=t[i]+f,void 0!==h[j]){return j}}return void 0!==h[f]?f:void 0
}function z(e,d){for(var f in d){e.style[A(e,f)||f]=d[f]}return e}function y(f){for(var e=1;e<arguments.length;e++){var h=arguments[e];for(var g in h){void 0===f[g]&&(f[g]=h[g])}}return f}function x(d,c){return"string"==typeof d?d:d[c%d.length]}function w(b){this.opts=y(b||{},w.defaults,q)}function v(){function a(d,e){return D("<"+d+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',e)}r.addRule(".spin-vml","behavior:url(#default#VML)"),w.prototype.lines=function(G,F){function E(){return z(a("group",{coordsize:e+" "+e,coordorigin:-g+" "+-g}),{width:e,height:e})
}function o(d,j,f){C(b,C(z(E(),{rotation:360/F.lines*d+"deg",left:~~j}),C(z(a("roundrect",{arcsize:F.corners}),{width:g,height:F.width,left:F.radius,top:-F.width>>1,filter:f}),a("fill",{color:x(F.color,d),opacity:F.opacity}),a("stroke",{opacity:0}))))}var n,g=F.length+F.width,e=2*g,c=2*-(F.width+F.length)+"px",b=z(E(),{position:"absolute",top:c,left:c});if(F.shadow){for(n=1;n<=F.lines;n++){o(n,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)")}}for(n=1;n<=F.lines;n++){o(n)
}return C(G,b)},w.prototype.opacity=function(g,f,j,i){var h=g.firstChild;i=i.shadow&&i.lines||0,h&&f+i<h.childNodes.length&&(h=h.childNodes[f+i],h=h&&h.firstChild,h=h&&h.firstChild,h&&(h.opacity=j))}}var u,t=["webkit","Moz","ms","O"],s={},r=function(){var a=D("style",{type:"text/css"});return C(document.getElementsByTagName("head")[0],a),a.sheet||a.styleSheet}(),q={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:0.25,fps:20,zIndex:2000000000,className:"spinner",top:"50%",left:"50%",position:"absolute"};
w.defaults={},y(w.prototype,{spin:function(M){this.stop();var L=this,K=L.opts,J=L.el=z(D(0,{className:K.className}),{position:K.position,width:0,zIndex:K.zIndex});K.radius+K.length+K.width;if(z(J,{left:K.left,top:K.top}),M&&M.insertBefore(J,M.firstChild||null),J.setAttribute("role","progressbar"),L.lines(J,L.opts),!u){var I,H=0,G=(K.lines-1)*(1-K.direction)/2,F=K.fps,E=F/K.speed,j=(1-K.opacity)/(E*K.trail/100),e=E/K.lines;!function a(){H++;for(var b=0;b<K.lines;b++){I=Math.max(1-(H+(K.lines-b)*e)%E*j,K.opacity),L.opacity(J,b*K.direction+G,I,K)
}L.timeout=L.el&&setTimeout(a,~~(1000/F))}()}return L},stop:function(){var b=this.el;return b&&(clearTimeout(this.timeout),b.parentNode&&b.parentNode.removeChild(b),this.el=void 0),this},lines:function(j,g){function e(d,f){return z(D(),{position:"absolute",width:g.length+g.width+"px",height:g.width+"px",background:d,boxShadow:f,transformOrigin:"left",transform:"rotate("+~~(360/g.lines*b+g.rotate)+"deg) translate("+g.radius+"px,0)",borderRadius:(g.corners*g.width>>1)+"px"})}for(var c,b=0,a=(g.lines-1)*(1-g.direction)/2;
b<g.lines;b++){c=z(D(),{position:"absolute",top:1+~(g.width/2)+"px",transform:g.hwaccel?"translate3d(0,0,0)":"",opacity:g.opacity,animation:u&&B(g.opacity,g.trail,a+b*g.direction,g.lines)+" "+1/g.speed+"s linear infinite"}),g.shadow&&C(c,z(e("#000","0 0 4px #000"),{top:"2px"})),C(j,C(c,e(x(g.color,b),"0 0 1px rgba(0,0,0,.1)")))}return j},opacity:function(e,d,f){d<e.childNodes.length&&(e.childNodes[d].style.opacity=f)}});var p=z(D("group"),{behavior:"url(#default#VML)"});return !A(p,"transform")&&p.adj?v():u=A(p,"animation"),w
});var ua=navigator.userAgent.toLowerCase();var isiOs=ua.match(/(iphone|ipod|ipad)/);var isAndroid=ua.match(/android/);var hasTouch=$.browser.mobile;var events={};events.start=hasTouch?"touchstart":"mousedown";events.move=hasTouch?"touchmove":"mousemove";events.end=hasTouch?"touchend":"mouseup";events.windowResize=hasTouch&&isiOs?"orientationchange":"resize";(function(b){if(!b.fn.imagesrc){jQuery.fn.extend({imagesrc:function(){var d;var c=b(this).data("aptsrc");if(typeof c!==typeof undefined&&c!==false){d=c}else{d=b(this).attr("src")
}if(typeof d===typeof undefined||d===false){return""}d=d.replace(/^(?:\.\.\/)+/,"");if(d.substring(0,1)!=="/"){d="/"+d}return d}})}b.mbZoomify={name:"mb.mbZoomify",author:"Matteo Bicocchi",version:"1.7.1",defaults:{zoomSteps:[1,2,3,100],screen:"self",startLevel:0,activateKeyboard:false,onStart:function(){},onZoomIn:function(){},onZoomOut:function(){},onDrag:function(){}},init:function(c){var d={};b.extend(d,b.mbZoomify.defaults,c);return this.each(function(){var h=this;var g=b(h);h.opt=d;if(!g.is("img")){return
}var j=g.width()<g.height();if(h.opt.screen=="self"){var f=b("<div/>").addClass("zoomWrapper").css({width:g.outerWidth(),height:g.outerHeight(),overflow:"hidden",position:g.css("position")=="static"?"relative":g.css("position"),display:g.css("display")=="inline"?"inline-block":"block"}).unselectable();g.wrap(f);g.css({border:"none",position:"absolute",width:g.width(),height:g.height(),left:"50%",top:"50%",marginLeft:-(g.width()/2),marginTop:-(g.height()/2)});g.removeAttr("onclick");g.parent().showLoader(function(){g.mbZoomify_run()
})}else{var e=b(h.opt.screen).addClass("zoomWrapper").unselectable();var i=b("<img>").attr("src",g.attr("src")).css({opacity:0}).data("highres",g.data("highres")).on("load",function(){if(j){i.css({height:"100%",width:"auto"})}else{i.css({width:"50%",height:"auto"})}i.css({width:i.width(),height:i.height(),marginTop:"auto",display:"block",marginLeft:"auto",marginRight:"auto"})});i.get(0).opt=d;e.css({overflow:"hidden",position:e.css("position")=="static"?"relative":e.css("position")}).empty().append(i);e.showLoader(function(){i.fadeIn(100,function(){i.mbZoomify_run()
})})}})},run:function(){var g=this.get(0);var f=b(g);var e=b.browser.msie?"?_="+new Date().getTime():"";var h={position:"absolute",width:"100%",height:"100%",top:0,left:0,opacity:0,background:"#fff"};var d=b("<div/>").addClass("zoomOverlay").css(h);var c=b("<img>");c.addClass("zoomifyOutScreen").css({position:"absolute",left:-5000,top:-5000,minHeight:"none",minWidth:"none"}).load(function(){g.maxWidth=b(this).width();g.maxHeight=b(this).height();b.mbZoomify.setMaxMin(g);g.zoomLevel=0;f.trigger("originalReady",false);
f.attr("src",c.attr("src"));f.parent().hideLoader();f.parent().append(d);setTimeout(function(){f.fadeTo(100,1)},1000);var k=b("<div/>").addClass("zoomControls");var l=b("<div/>").addClass("zoom-imagesInModal").on(events.end,function(){});k.append(l);if(g.opt.isOverlay){var j=b("<div/>").addClass("zoomCloseControl").on(events.end,function(){f.mbZoomify_overlay("destroy")});k.append(j)}f.parent().append(k);b("body").unselectable();k.unselectable();function i(o){function n(){var s=o.pageX-f.offset().left;var r=o.pageY-f.offset().top;
var q=(s*g.minWidth)/f.width();var t=(r*g.minHeight)/f.height();return{x:q,y:t}}g.mousex=n().x;g.mousey=n().y;var p=parseFloat(f.css("margin-left"));var m=parseFloat(f.css("margin-top"));g.origin={startX:o.pageX,startY:o.pageY,x:g.mousex,y:g.mousey,ml:p,mt:m}}b(document).on(events.end,function(m){g.candrag=false});d.on(events.start,function(m){if(hasTouch){m=m.originalEvent;m=m.touches[0]}i(m);g.candrag=true;g.canZoom=true;d.addClass("move");b("body").unselectable();d.unselectable()}).on(events.move,function(o){if(!g.candrag||o.metaKey){return
}d.addClass("grab");g.canZoom=false;var n=o;if(hasTouch){o=o.originalEvent;o=o.touches[0]}n.preventDefault();n.stopPropagation();var m={x:o.pageX,y:o.pageY};f.mbZoomify_drag(m)}).on(events.end,function(m){d.removeClass("move grab");b("body").selectable();if(m.metaKey&&m.altKey){g.zoomLevel--;f.mbZoomify_zoom(true)}else{if(m.metaKey){g.zoomLevel++;f.mbZoomify_zoom(true)}else{if(g.canZoom){if(g.reachedMax){g.zoomLevel=0}else{g.zoomLevel++}f.mbZoomify_zoom(true)}}}});if(!hasTouch){d.mousewheel(function(o,p,n,m){if(o.metaKey&&!b.browser.mozilla){d.addClass("zoomIn");
i(o);if(m>0.3&&!g.zooming){g.zooming=true;g.zoomLevel=g.opt.zoomSteps.length-1;f.mbZoomify_zoom(true)}else{if(m<-0.3&&!g.zooming){d.addClass("zoomOut");g.zooming=true;g.zoomLevel=0;f.mbZoomify_zoom(true)}else{if(m>0.2&&!g.zooming){g.zooming=true;g.zoomLevel++;f.mbZoomify_zoom(true)}else{if(m<-0.2&&!g.zooming){g.zooming=true;d.addClass("zoomOut");g.zoomLevel--;f.mbZoomify_zoom(true)}else{if(m<0.1&&m>-0.1){d.removeClass("zoomOut");if(g.zooming){g.zooming=false}}}}}}o.stopPropagation();o.preventDefault()}})}c.remove();
if(g.opt.startLevel){setTimeout(function(){g.zoomLevel=g.opt.startLevel;f.mbZoomify_zoom()},1200)}d.addClass("zoomIn");if(typeof g.opt.onStart=="function"){g.opt.onStart(g.origin)}}).attr("src",f.data("highres")?f.data("highres")+e:f.data("highres")+e).appendTo("body")},zoom:function(j){var d=this.get(0);var q=b(d);var p=q.parent();var f=p.find(".zoomOverlay");var n=p.find(".zoomControls");f.removeClass("move grab");f.addClass("zoomIn");f.removeClass("zoomOut");if(!d.oldZoomLevel){d.oldZoomLevel=0}if(typeof j=="string"){d=q.children("img").get(0);
q=b(d);if(!d){return}if(j=="in"){d.zoomLevel++}if(j=="out"){d.zoomLevel--}j=false}if(d.zoomLevel>0){n.find(".zoom-imagesInModal").addClass("dragImage").removeClass("zoom-imagesInModal")}else{n.find(".dragImage").addClass("zoom-imagesInModal").removeClass("dragImage")}if(d.zoomLevel>d.opt.zoomSteps.length-1){d.zoomLevel=d.opt.zoomSteps.length-1;b(document).trigger("maxzoom",false);f.addClass("zoomOut");f.removeClass("zoomIn")}if(d.zoomLevel<0){d.zoomLevel=0;f.addClass("zoomIn");f.removeClass("zoomOut");b(document).trigger("minzoom",false)
}var l="";var g="";if(d.zoomLevel==0){l=q.width()/4;g=q.height()/4}else{l=q.width()+(q.width()/d.zoomLevel);g=q.height()+(q.height()/d.zoomLevel)}if(d.zoomLevel==3){d.reachedMax=true;f.addClass("zoomOut");f.removeClass("zoomIn");b(document).trigger("maxzoom",false)}else{d.reachedMax=false}if(d.zoomLevel==0){d.reachedMin=true}else{d.reachedMin=false}var e=l/2;var c=g/2;if(j&&d.zoomLevel>0){var i=l/d.minWidth;var m=d.origin.x*i;var k=d.origin.y*i;e=e+(m-e);c=c+(k-c);if(e<f.width()/2){e=(l/2)-((l-f.width())/2)}if(e+f.width()/2>l){e=(l/2)+((l-f.width())/2)
}if(c<f.height()/2){c=(g/2)-((g-f.height())/2)}if(c+f.height()/2>g){c=(g/2)+((g-f.height())/2)}}var o=function(){if(d.oldZoomLevel<d.zoomLevel){if(typeof d.opt.onZoomIn=="function"){d.opt.onZoomIn(d.zoomLevel)}}if(d.oldZoomLevel>d.zoomLevel){if(typeof d.opt.onZoomOut=="function"){d.opt.onZoomOut(d.zoomLevel)}}d.oldZoomLevel=d.zoomLevel};if(d.zoomLevel==0){q.mbZoomify_animate({width:l,height:g,marginLeft:"auto",marginTop:"auto"},2000,false,o);q.css({width:l,height:g,marginLeft:"auto",marginTop:"auto"},100,false,o)
}else{q.mbZoomify_animate({width:l,height:g},800,false,o);q.css({width:l,height:g},100,false,o)}},drag:function(j){var d=this.get(0);var l=b(d);if(d.zoomLevel==0){return}var g=j.x-d.origin.startX;var e=j.y-d.origin.startY;var k=l.width();var i=l.height();if(isNaN(d.origin.ml)){d.origin.ml=0}if(isNaN(d.origin.mt)){d.origin.mt=0}var f=d.origin.ml+g;var c=d.origin.mt+e;if(typeof d.opt.onDrag=="function"){d.opt.onDrag(d.origin)}l.css({marginLeft:f,marginTop:c})},setMaxMin:function(d){var e=d.maxWidth<d.maxHeight;
var c=b(d);if(!e){d.minWidth=c.parents(".zoomWrapper").width();d.minHeight=(d.minWidth*d.maxHeight)/d.maxWidth}else{d.minHeight=c.parents(".zoomWrapper").height();d.minWidth=(d.minHeight*d.maxWidth)/d.maxHeight}},destroy:function(){},animate:function(d,i,f,j){if(!d){return}if(typeof i=="function"){j=i}if(typeof f=="function"){j=f}if(!i){i=100}if(!f){f="cubic-bezier(0.65,0.03,0.36,0.72)"}var e=this;if(b.browser.msie){e.animate(d,i,j);return}var h="";var c="TransitionEnd";if(b.browser.webkit||b.browser.opera){h="-webkit-";
c="webkitTransitionEnd"}else{if(b.browser.mozilla){h="-moz-";c="transitionend"}}e.css(h+"transition-property","all");e.css(h+"transition-duration",i+"ms");e.css(h+"transition-timing-function",f);e.css(d);var g=function(){e.css(h+"transition","");if(typeof j=="function"){j()}e.get(0).removeEventListener(c,g,true)};if(navigator.userAgent.indexOf("MSIE 7.0")>0||navigator.userAgent.indexOf("MSIE 8.0")>0){e.get(0).attachEvent(c,g,true)}else{e.get(0).addEventListener(c,g,true)}},overlay:function(f){var g=this.get(0);
var e=b(g);if(f=="destroy"){b("#zoomScreenOver").fadeOut(10,function(){b(this).remove()});return}var d=b("<div/>").attr("id","zoomScreenOver").addClass("zoomScreenOver");d.css({position:"fixed",top:0,left:0,width:"100%",height:"100%"}).hide();var c=b("<div/>").attr("id","zoomScreen");if(hasTouch){c.addClass("isTouch")}c.unselectable();b("body").append(d);d.append(c);d.css({opacity:0}).show();c.css({position:"relative",margin:"auto",marginTop:(b(window).height()-c.height())/2});d.fadeTo(500,1,function(){var h={};
b.extend(h,b.mbZoomify.defaults,f,{screen:"#zoomScreen"});e.mbZoomify(h);g.opt.isOverlay=true});c.on(events.end,function(h){h.preventDefault()});c.on(events.start,function(h){h.preventDefault();b("body").unselectable()});d.on(events.end,function(h){if(b(h.target).hasClass("zoomScreenOver")){e.mbZoomify_overlay("destroy")}b("body").selectable()})}};b.showLoader=function(d){b("#loader").remove();var c=b("<div/>").attr("id","loader").css({width:"100%",height:"100%",zIndex:10000}).hide();b(this).append(c);b("#loader").fadeIn(100,function(){b("#loader").spin({color:"rgb(0,0,0)"});
if(typeof d==="function"){d()}})};b.hideLoader=function(d){var c=b("#loader",b(this));b("#loader").fadeOut(100,function(){if(typeof d==="function"){d()}b(this).remove()})};b.fn.unselectable=function(){this.each(function(){b(this).css({"-moz-user-select":"none","-khtml-user-select":"none","-ms-user-select":"none","user-select":"none"}).attr("unselectable","on")});return b(this)};b.fn.selectable=function(){this.each(function(){b(this).css({"-moz-user-select":"auto","-webkit-user-select":"auto","-ms-user-select":"auto","user-select":"auto"}).attr("unselectable","off")
});return b(this)};var a={lines:14,length:7,width:4,radius:14,color:"#000000",speed:1,trail:50,shadow:false};b.fn.spin=function(c){this.each(function(){var e=b(this),d=e.data();if(d.spinner){d.spinner.stop();delete d.spinner}if(a!==false){b.extend(a,c);d.spinner=new Spinner(a).spin(this)}});return this};b.fn.mbZoomify=b.mbZoomify.init;b.fn.mbZoomify_run=b.mbZoomify.run;b.fn.mbZoomify_zoom=b.mbZoomify.zoom;b.fn.mbZoomify_drag=b.mbZoomify.drag;b.fn.mbZoomify_animate=b.mbZoomify.animate;b.fn.mbZoomify_overlay=b.mbZoomify.overlay;
b.fn.showLoader=b.showLoader;b.fn.hideLoader=b.hideLoader;b(function(){b("a[class=EnlargeImage]").click(function(f){var e=b(this).children("div.hiddendiv").text();b(this).CreateModalDialogue(e,f);return false});var c=document.createElement("link");c.type="text/css";c.rel="stylesheet";var d="";if(navigator.userAgent.indexOf("MSIE 7.0")>0||navigator.userAgent.indexOf("MSIE 8.0")>0||navigator.userAgent.indexOf("MSIE 9.0")>0||navigator.userAgent.indexOf("MSIE 10.0")>0){c.href="/css/mb.zoomifyForIE.css";d=document.getElementsByTagName("head")[0];
d.appendChild(c)}else{c.href="/css/mb.zoomify.css";d=document.getElementsByTagName("head")[0];d.appendChild(c)}b("#gallery").CreateModalDialogue(b(".default-img").imagesrc())});b.fn.CreateModalDialogue=function(j,u){if(j.length==0){return}if(b("#newmodalbox").length>0){b("div[aria-describedby='newmodalbox']").remove()}var x=b("#disclaimer").html();var e="";var w=document.URL.toLowerCase().indexOf("detail")>0;if(w){x=b(".disclaimer").html().trim();e=b(".view-larger");j_imglink=b(".img-link, .more-images")}var q=[];
var o="";var z="";var k=b(".default-img");var A=(j.indexOf("_t.")!=-1);b.support.cors=true;if(A){var y="/ContentService/ContentService.svc/GetImagesByFileName?localimagelink=.."+j;b.ajax({type:"GET",url:y,contentType:"application/json; charset=utf-8",dataType:"json",success:function(i){if(!w){l(i);t(u,i);return}else{if(b(".more-images").length==1||b(".zoom-images").length==1){l(i);t(u,i);return}InitGallery(i);return}},error:function(C,i,D){}})}else{e="";var n=j.split("/");var g={};for(var v=0;v<n.length;v++){if(n[v]==""||n[v]==".."){continue
}if(n[v]=="images"&&v>2){e=e+"lrg/";continue}e=e+n[v]+"/"}e=e.slice(0,-1);if(!r("/"+e,c)){e=e}if(w){if(b(".more-images").length==1||b(".zoom-images").length==1){t(u,g)}else{m(window.location.protocol+"//"+window.location.host+"/"+e,function(i){if(i==200||i==0||i==""){h();p()}else{return}})}}else{t(u,g)}}function B(i){if(!w){l(i);t(u,i);return}else{if(b(".more-images").length==1||b(".zoom-images").length==1){l(i);t(u,i);return}InitGallery(i);return}}function f(){e="";var E=j.split("/");var D={};for(var C=0;C<E.length;
C++){if(E[C]==""||E[C]==".."){continue}if(E[C]=="images"&&C>2){e=e+"lrg/";continue}e=e+E[C]+"/"}e=e.slice(0,-1);if(!r("/"+e,c)){e=e}if(w){if(b(".more-images").length==1||b(".zoom-images").length==1){t(u,D)}else{m(window.location.protocol+"//"+window.location.host+"/"+e,function(i){if(i==200||i==0||i==""){h();p()}else{return}})}}else{t(u,D)}}function r(C,D){var i=new Image();i.onerror=function(){D(C,false)};i.onload=function(){D(C,true)};i.src=C}function c(i,C){return C}InitGallery=function(i){images=i;if(d(images)){if(images.length>1){e.hide();
s()}else{if(images.length==1){e.hide();h()}else{e.show();b(k).unwrap()}}p()}else{e.show();b(k).unwrap()}};function d(i){var C=true;b.each(i,function(D){if((i[D].lrgURL=="")&&(i[D].hdURL=="")){C=false}});return C}function l(i){var F="";var E="";var C="";var D="";z='<div id="thumbs" class="thumbnails-container">';b.each(i,function(G){var H="";if(i[G].URL!=""){F="images/"+i[G].Url}if(i[G].hdURL!=""){E="images/"+i[G].hdURL;H=E}if(i[G].lrgURL!=""){D="images/"+i[G].lrgURL;if(H==""){H=D}}if(i[G].smURL!=""){C="images/"+i[G].smURL
}z=z.concat("<div class='thumbnailsdiv'><img  src='/"+C+"' class='thumbnail' data-highres='/"+H+"' onclick=\"$(this).mbZoomify({screen:'#screen'});\"></div>")});o='<div id="screen"></div><div id="controls" style="display:none;" ><span class="btn" onclick="$(\'#screen\').mbZoomify_zoom(\'in\')">zoom in</span><span class="btn" onclick="$(\'#screen\').mbZoomify_zoom(\'out\')">EnlargeImage out</span></div>';z=z.concat('<div id="disclaimerlabel">'+x+"</div></div>");o=o.concat(z)}function t(C,i){if(A){b('<div class="modalstyling" id="newmodalbox" ></div>').dialog({closeonescape:true,draggable:true,autoopen:false,height:500,width:675,modal:false,resizable:false,classes:{"ui-dialog":"mb-zoomify"},position:{my:"left+3 bottom-3",of:C,collision:"fit"},close:function(D,E){b("div[aria-describedby='newmodalbox']").remove()
}})}else{b('<div class="modalstyling" id="newmodalbox" ></div>').dialog({closeonescape:true,draggable:true,autoopen:false,height:310,width:350,modal:false,resizable:false,classes:{"ui-dialog":"mb-zoomify"},position:{my:"left+3 bottom-3",of:C,collision:"fit"},close:function(D,E){b("div[aria-describedby='newmodalbox']").remove()}})}if(q.length==1||!A){o="<div class='mainimagediv'><img class='mainimage' src='/"+e+"' ></div><div id='disclaimerlabel'>"+x+"</div>"}b("#newmodalbox").append(o);b("#newmodalbox").dialog("open");
b("#newmodalbox").dialog("option","classes.ui-dialog","mb-zoomify");b(".thumbnailsdiv").click(function(){b(b(this).children("img")).mbZoomify({screen:"#screen"})});if(A){b("#thumbs").find("img").eq(0).click()}}function h(){var i=b("#hiddenenlargetext").text();j_imglink.after('<a href="javascript:void(\'0\');" class="zoom-images"><i class="fa fa-search-plus"></i>&nbsp;'+i+"</a>");b(".img-link img").addClass("mag-icon")}function s(){j_imglink.after('<div><a href="javascript:void(\'0\');" class="more-images"></a></div>');
b(".img-link img").addClass("mag-icon")}function p(){b(".default-img, .more-images, .zoom-images").click(function(i){b("#gallery").CreateModalDialogue(b(".default-img").imagesrc(),i)})}function m(C,i){b.ajax({url:C,dataType:"text",type:"GET",complete:function(D){if(typeof i==="function"){i.apply(this,[D.status])}}})}}})($);